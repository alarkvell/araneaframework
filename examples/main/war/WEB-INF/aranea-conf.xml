<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">

<beans>
  <bean id="araneaApplicationStart"
    class="org.araneaframework.example.main.web.RootWidget"
    singleton="false"/>
  
  <bean class="org.araneaframework.http.filter.StandardMountingFilterService" 
    id="araneaMountFilter" singleton="false">
    <property name="mounts">
      <map>
        <entry key="person">
          <bean class="org.araneaframework.example.main.message.ExamplePersonMountMessageFactory" singleton="false"/>
        </entry>
      </map>
    </property>
  </bean>
  
  <!-- Set the limits for file uploads. -->
  <bean id="araneaFileUploadFilter" class="org.araneaframework.http.filter.StandardFileUploadFilterService" singleton="false">
    <property name="maximumSize" value="1048576"/>
    <property name="maximumRequestSize" value="5242880"/>
    <property name="maximumCachedSize" value="1048576"/>
  </bean>
  
  <bean id="araneaCustomSessionFilters" singleton="false"
    class="org.araneaframework.framework.filter.StandardFilterChainService">
    <property name="filterChain">     
      <list>
        <ref bean="araneaSerializingAudit"/>
      </list>
    </property>
  </bean>
  
  <bean id="araneaCustomWidgetFilters" singleton="false"
    class="org.araneaframework.framework.filter.StandardFilterChainWidget">
    <property name="filterChain">     
      <list>
        <ref bean="araneaScrollingFilter"/>
      </list>
    </property>
  </bean>
  
  <bean id="simpleTreeMessageFactory" class="org.araneaframework.example.main.message.ExampleSimpleTreeMessageFactory"/>
  <bean id="overlayDemoMessageFactory" class="org.araneaframework.example.main.message.ExampleOverlayDemoMessageFactory"/>
  <bean class="org.araneaframework.http.filter.StandardMountingFilterService" 
    id="araneaMountingFilter" singleton="false">
    <property name="mounts">
      <map>
        <entry key="simpleTree" value-ref="simpleTreeMessageFactory"/>
        <entry key="overlayDemo" value-ref="overlayDemoMessageFactory"/>
      </map>
    </property>
  </bean>
  
  <!-- Configuration for supporting the usage of client side state filter -->
  
  <bean class="org.araneaframework.http.filter.StandardHttpResponseFilterService" 
    id="araneaResponseHeaderFilter" singleton="false">
<!--    <property name="cacheable" value="true"/>-->
  </bean>
  
  <bean class="org.araneaframework.http.filter.StandardStateVersioningFilterWidget" id="araneaStateVersioningFilter" singleton="false">
  	<property name="serverSideStorage" value="true"/>
  </bean>
  

  <bean id="araneaWidgetFilters" singleton="false" 
    class="org.araneaframework.framework.filter.StandardFilterChainWidget">
    <property name="childWidget" ref="araneaOverlayContainer"/>
    <property name="filterChain">
      <list>
      	<ref bean="araneaStateVersioningFilter"/>
        <ref bean="araneaRedirectingFilter"/>        
        <ref bean="araneaTransactionFilter"/>
        <ref bean="araneaUpdateRegionFilter"/>
        <ref bean="araneaConfirmationFilter"/>
        <ref bean="araneaRenderStatusResettingFilter"/>
        <ref bean="araneaMessagingFilter"/>
        <ref bean="araneaEnvContextFilter"/>
        <ref bean="araneaPopupFilter"/>
        <bean class="org.araneaframework.integration.spring.SpringOptionalFilterWidget" singleton="false">
          <property name="beanId" value="araneaCustomWidgetFilters"/>
        </bean>        
      </list>
    </property>
   </bean>

</beans>
